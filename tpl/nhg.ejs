<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no,viewport-fit=cover">
    <link rel="stylesheet" href="../bootstrap.min.css">
    <script src="https://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
    <style>
        .col-lg-1, .col-lg-10, .col-lg-11, .col-lg-12, .col-lg-2, .col-lg-3, .col-lg-4, .col-lg-5, .col-lg-6, .col-lg-7, .col-lg-8, .col-lg-9, .col-md-1, .col-md-10, .col-md-11, .col-md-12, .col-md-2, .col-md-3, .col-md-4, .col-md-5, .col-md-6, .col-md-7, .col-md-8, .col-md-9, .col-sm-1, .col-sm-10, .col-sm-11, .col-sm-12, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9, .col-xs-1, .col-xs-10, .col-xs-11, .col-xs-12, .col-xs-2, .col-xs-3, .col-xs-4, .col-xs-5, .col-xs-6, .col-xs-7, .col-xs-8, .col-xs-9 {
            padding-right: 5px;
            padding-left: 5px;
        }

        * {
            margin: 0;
            padding: 0;
        }

        body {
            padding: 30px;
        }

        .table-responsive {
            margin-top: 20px;
        }

        h4 {
            padding: 8px;
            font-weight: 600;
        }
    </style>
</head>
<body>
<div style="max-width: 640px;margin: 0 auto">
    <div class="option">
        <div class="row">
            <div class="col-lg-5 col-sm-5 col-md-5 col-xs-5">
                <input type="date" id="date" class="form-control">
            </div>
            <div class="col-lg-3 col-sm-3 col-md-3 col-xs-3">
                <input type="text" id="price" class="form-control">
            </div>
            <div class="col-lg-3 col-sm-3 col-md-3 col-xs-3">
                <button id="add" class="btn btn-default" type="button">add</button>
                <button id="del" class="btn btn-default" type="button">del</button>
            </div>
        </div>
    </div>
    <div class="table-responsive">
        <table class="table">
            <table class="table">
                <% list.forEach(function(item){ %>
                    <tr>
                        <td> <%- item.item %></td>
                        <td> <%- item.value %></td>
                        <td> <%- item.total %></td>
                        <td>
                            <button time="<%- item.item %>" class="btn delete btn-xs">删除</button>
                        </td>
                    </tr>
                <% }); %>
            </table>
        </table>
    </div>
</div>
<script>
    $('.delete').on('click', (e) => {
        const time = $(e.target).attr('time')
        $.ajax({
            url: `${origin}/nhg/del`,
            type: "POST",
            dataType: "json",
            data: {
                time
            },
            success: function () {
                setTimeout(() => {
                    location.reload()
                }, 1000)
            }
        })
    })
    $('#add').on('click', (e) => {
        const time = $('#date').val()
        const price = $('#price').val()
        $.ajax({
            url: `${origin}/nhg/add`,
            type: "POST",
            dataType: "json",
            data: {
                time,
                price
            },
            success: function () {
                setTimeout(() => {
                    location.reload()
                }, 1000)
            }
        })
    })
    $('#del').on('click', (e) => {
        const time = $('#date').val()
        const price = $('#price').val()
        $.ajax({
            url: `${origin}/nhg/del`,
            type: "POST",
            dataType: "json",
            data: {
                time,
                price
            },
            success: function () {
                setTimeout(() => {
                    location.reload()
                }, 1000)
            }
        })
    })
</script>
</body>
</html>
